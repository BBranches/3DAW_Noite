<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Excluir Produto</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="js/script.js"></script>
  <script>
    function listarProdutoCod() {
      let form = document.getElementById("formExcluirBuscar");
      let validacao = validarProduto(form);
      if (validacao == true) {
        let xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            document.getElementById("resposta").innerHTML = this.responseText;
          }
        }
        xmlHttp.open("GET", "http://127.3.3.3/github/AV2/excluirDetalhesProduto.php?codigobarra=" + form.codigobarra.value, true);
        //"http://localhost/AV2/excluirDetalhesProduto.php?codigobarra="
        xmlHttp.send();
        console.log("requisição enviada");
      }
    }
    function excluirProduto() {
      let form = document.getElementById("formExcluirBuscar");
      result = confirm("O produto não será excluído. Tem certeza?");
      if (result) {
        let xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            document.getElementById("resposta").innerHTML = this.responseText;
          }
        }
        xmlHttp.open("GET", "http://127.3.3.3/github/AV2/excluirProduto.php?codigobarra=" + form.codigobarra.value, true);
        // "http://localhost/AV2/excluirProduto.php?codigobarra="
        xmlHttp.send();
        console.log("requisição enviada");
      }
    }
    function validarProduto(form) {
      if (form.codigobarra.value === "") {
        alert("Preencha o campo Código de Barras");
        form.codigobarra.focus();
        return false;
      }
      return true;
    }
  </script>
</head>

<body>
  <header id="header">
    <!--MENU-->
    <nav class="nav" id="nav">
      <ul class="lista">
        <li><a class="btnMenu" id="home" href="index.html">Home</a></li>
        <li><a class="btnMenu" href="inserirProduto.html">Inserir Produto</a></li>
        <li><a class="btnMenu" href="listarProduto.html">Listar Produto</a></li>
        <li><a class="btnMenu active" href="excluirProduto.html">Excluir Produto</a></li>
      </ul>
    </nav>
  </header>
  <section>
    <div>
      <form action="" id="formExcluirBuscar" class="formulario">
        <h1>Excluir Produto</h1>
        <label for="codigobarra">Código de Barras</label><input type="text" placeholder="Código de Barras do produto"
          name="codigobarra">
        <input type="button" name="op" value="Pesquisar" class="btn" onclick="listarProdutoCod()">
      </form>
    </div>
    <div id="resposta" class="detalhes"></div>
  </section>
</body>

</html>