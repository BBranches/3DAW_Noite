<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Inserir Aluno Banco de Dados - AJAX</title>
  <script src="ajax.js"></script>
  <script>
    function inserirAluno() {
      let objAluno = document.getElementById("formAluno");
      let msg = validarAluno(objAluno);
      if (msg == "") {
        let xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            //let obj = JSON.parse(this.responseText);
            document.getElementById("resposta").innerHTML = this.responseText;
          }
        }

        xmlHttp.open("GET", "http://127.3.3.3/github/Ajax/ex21_inserirAluno.php?nome=" + objAluno.nome.value +
          "&email=" + objAluno.email.value +
          "&cpf=" + objAluno.cpf.value +
          "&matricula=" + objAluno.matricula.value +
          "&uf=" + objAluno.uf.value +
          "&cidade=" + objAluno.cidades.value, true);
        xmlHttp.send();
        console.log("requisição enviada");
      }

    }
    function validarAluno(Aluno) {
      return "";
    }
  </script>
</head>

<body>
  <h3>Inserir Aluno Banco de Dados - AJAX</h3>
  <form action="" method="GET" name="Aluno" id="formAluno">
    Nome: <input type="text" name="nome"> <br><br>
    Email: <input type="text" name="email"> <br><br>
    CPF: <input type="text" name="cpf"> <br><br>
    Matricula: <input type="text" name="matricula"> <br><br>
    Estado: <input type="text" id="uf" name="uf" onchange="mostraInfo(this.value)"><br><br>
    Cidades: <select name="cidades" id="cidades"></select><br><br>

    <input type="button" name="op" value="Inserir Aluno" onclick="inserirAluno()">
  </form>
  <p id="resposta"></p>
</body>

</html>